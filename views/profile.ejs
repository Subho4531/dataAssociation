<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  </head>

  <body>
    <div class="w-full min-h-screen max-h-max bg-zinc-900 p-10">
      <div class="flex gap-2">
       <a href="/upload">

           <img
           src="images/<%=user.profilepic%>"
           class="size-10 rounded-full inline-block border-2 border-zinc-600"
           
           
           />
        </a> 
        <h1 class="text-3xl text-white mb-4">Hello , <%=user.name %>👋</h1>
      </div>
      <div class="w-full flex flex-col items-center">
        <h3 class="text-xl text-white m-2">
          You can create a new post here ✉️
        </h3>

        <form
          class="flex flex-col justify-center items-center text-white"
          action="/post"
          method="post"
        >
          <textarea
            class="p-4 m-2 w-72 h-24 bg-transparent outline-none border-2 border-zinc-700 rounded-md resize-none"
            name="content"
            placeholder="Write here something ✒️"
          ></textarea>
          <input
            class="py-2 px-3 bg-blue-500 rounded-md"
            type="submit"
            value="Create a new post"
          />
        </form>

        <a
          href="/allposts"
          class="bg-blue-500 hover:bg-blue-700 text-white py-2 px-3 rounded mt-4"
          >View All Posts</a
        >
      </div>
      <div class="posts mt-10">
        <h1 class="text-zinc-500 text-xl mt-2">Your Posts :</h1>
        <div class="post-container flex justify-items-start flex-wrap gap-2">
          <% user.posts.forEach((post)=>{ %>
          <div
            class="post text-white w-72 border-zinc-600 border-2 rounded-lg bg-zinc-800 p-3 my-2 text-sm text-pretty tracking-tight"
          >
            <a class="text-blue-500 py-2">@<%=user.name%></a>
            <p class=""><%=post.content %></p>
            <small class="mt-2"> <%=post.likes.length%> likes </small>
            <div class="btns mt-0.5 px-1 flex justify-between">
              <a href="/like/<%=post._id %>">
                <%=post.likes.indexOf(user._id)===-1 ? "❤️" : "💓" %>
              </a>
              <div class="flex gap-2">
                <a href="/edit/<%=post._id %>" class="text-amber-300">📝</a>
                <a href="/delete/<%=post._id %>" class="text-amber-300">❌</a>
              </div>
            </div>
          </div>
          <% }); %>
        </div>
      </div>
    </div>
  </body>
</html>
